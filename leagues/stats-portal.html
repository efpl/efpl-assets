<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>eFPL Season 2 - Live Stats</title>
<meta name="description" content="Live eFPL Season 2 stats across Diamond, Ruby, Sapphire, Crystal, Gold, and Emerald leagues: matches, goals, standings, clean sheets, biggest wins and more." />
<link rel="icon" href="https://efpl-assets.pages.dev/img/logo.png" />

<style>
  :root{
    --bg:#0b1636;
    --card:#0f1e49;
    --card2:#13265b;
    --ink:#ffffff;
    --muted:#b8c6e3;
    --accent:#f9d71c;
    --line:rgba(249,215,28,.3);
    --ok:#2fbf71; --mid:#9aa4b2; --away:#5aa4ff;
  }
  * { box-sizing:border-box }
  html,body{margin:0;background:var(--bg);color:var(--ink);font:15.5px/1.55 system-ui,Segoe UI,Roboto,Arial,sans-serif}

  .wrap{max-width:1080px;margin:0 auto;padding:16px 16px 28px}

  /* Header */
  .hdr{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 0}
  .brand{display:flex;align-items:center;gap:10px}
  .brand img{height:36px;width:auto;border-radius:8px;object-fit:contain}
  .brand h1{margin:0;font-size:18px;letter-spacing:.4px}
  .eyebrow{display:inline-block;background:var(--accent);color:#0b1b3d;padding:2px 8px;border-radius:999px;font-weight:900;font-size:11px}

  /* League badges filter */
  .badges{display:flex;flex-wrap:wrap;gap:10px;margin:10px 0 12px}
  .badge{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:6px 10px;display:flex;align-items:center;gap:8px;cursor:pointer}
  .badge img{height:22px;width:auto;display:block;object-fit:contain}
  .badge.active{background:var(--accent);color:#0b1b3d;border-color:transparent}

  /* KPI rail */
  .rail{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
  .kpi{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:10px}
  .kpi .t{font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:.04em}
  .kpi .v{font-weight:900;font-size:20px}

  /* Bars (now properly fill) */
  .bar{
    height:10px;border-radius:999px;background:rgba(255,255,255,.06);
    overflow:hidden;border:1px solid var(--line);
    display:flex;align-items:stretch
  }
  .seg{height:100%;display:block}
  .home{background:var(--ok)} .draw{background:var(--mid)} .away{background:var(--away)}
  .mini{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin:10px 0}
  .card{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:12px}

  /* Tables */
  table{
    width:100%;
    border-collapse:collapse;
    table-layout:fixed;        /* consistent row height */
    word-break:keep-all;
  }
  thead th{
    background:var(--accent);
    color:#0b1b3d;
    padding:8px;
    font-size:12px;
    text-transform:uppercase;
    letter-spacing:.03em;
  }
  tbody td{
    padding:8px;
    font-weight:600;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }
  tbody tr:nth-child(odd){background:var(--card)}
  tbody tr:nth-child(even){background:var(--card2)}
  .left{text-align:left;max-width:210px;}
  .right{text-align:right}
  .center{text-align:center}

  .two-col{display:grid;grid-template-columns:1fr 1fr;gap:10px}

  /* Larger, more visible league badges in tables */
  .lg{
    height:22px;
    width:auto;
    vertical-align:middle;
    margin-right:8px;
    object-fit:contain;
    filter:drop-shadow(0 0 2px rgba(0,0,0,.6));
  }

  @media (max-width:900px){
    .rail{grid-template-columns:repeat(2,1fr)}
    .two-col{grid-template-columns:1fr}
  }

  details{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:10px}
  summary{cursor:pointer;font-weight:900}
  summary::marker{content:""}
  summary::after{content:"▾";margin-left:6px}
  details[open] summary::after{content:"▴"}
  .note{color:var(--muted);font-size:12.5px}

  .foot{display:flex;justify-content:space-between;flex-wrap:wrap;gap:8px;margin-top:14px;color:var(--muted);font-size:12.5px}
</style>
</head>
<body>
  <div class="wrap">
    <!-- Header -->
    <header class="hdr">
      <div class="brand">
        <img src="https://efpl-assets.pages.dev/img/logo.png" alt="eFPL logo">
        <div>
          <div class="eyebrow">Season 2</div>
          <h1>eFPL Live Stats </h1>
        </div>
      </div>
      <div id="updated" class="eyebrow">Loading...</div>
    </header>

    <!-- League badge filter -->
    <nav class="badges" id="badges"></nav>

    <!-- KPI rail -->
    <section class="rail" aria-label="Key metrics">
      <div class="kpi"><div class="t">Matches</div><div class="v" id="kpi-matches">-</div></div>
      <div class="kpi"><div class="t">Goals</div><div class="v" id="kpi-goals">-</div></div>
      <div class="kpi"><div class="t">Avg / match</div><div class="v" id="kpi-avg">-</div></div>
      <div class="kpi"><div class="t">Leagues</div><div class="v" id="kpi-leagues">-</div></div>
    </section>

    <!-- Result + Progress bars -->
    <section class="mini" style="margin-top:10px">
      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
          <strong>Result split</strong>
          <span id="split-text" class="note">-</span>
        </div>
        <div class="bar" title="Home / Draw / Away">
          <span id="seg-home" class="seg home" style="width:0%"></span>
          <span id="seg-draw" class="seg draw" style="width:0%"></span>
          <span id="seg-away" class="seg away" style="width:0%"></span>
        </div>
      </div>
      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
          <strong>Completion</strong>
          <span id="prog-text" class="note">-</span>
        </div>
        <div class="bar" title="Completed / Scheduled">
          <span id="seg-prog" class="seg" style="width:0%;background:linear-gradient(90deg,#ffd03b,#f9d71c)"></span>
        </div>
      </div>
    </section>

    <!-- Leaderboard + Highlights -->
    <section class="two-col" style="margin-top:10px">
      <div class="card">
        <h3 style="margin:0 0 8px">Leaderboard</h3>
        <table id="tbl-leader">
          <thead><tr>
            <th>#</th><th class="left">Team</th><th>GP</th><th>W</th><th>D</th><th>L</th><th>GF</th><th>GA</th><th>GD</th><th>Pts</th><th>CS</th>
          </tr></thead>
          <tbody></tbody>
        </table>
      </div>

      <div class="card">
        <h3 style="margin:0 0 8px">Highlights</h3>
        <table id="tbl-hi">
          <tbody>
            <tr><td class="left">Biggest win</td><td id="hi-big" class="right">-</td></tr>
            <tr><td class="left">Highest scoring game</td><td id="hi-hsg" class="right">-</td></tr>
            <tr><td class="left">Top scoring team</td><td id="hi-topgf" class="right">-</td></tr>
            <tr><td class="left">Most conceded</td><td id="hi-mostga" class="right">-</td></tr>
            <tr><td class="left">Most clean sheets</td><td id="hi-mostcs" class="right">-</td></tr>
          </tbody>
        </table>

        <details style="margin-top:10px">
          <summary>More tables</summary>
          <div style="margin-top:8px">
            <div class="card" style="margin-bottom:8px">
              <strong>Top scoring teams (Top 10)</strong>
              <table id="tbl-gf" style="margin-top:6px">
                <thead><tr><th>#</th><th class="left">Team</th><th>GP</th><th>GF</th><th>GD</th><th>Pts</th></tr></thead>
                <tbody></tbody>
              </table>
            </div>
            <div class="card">
              <strong>Best defence (Top 10)</strong>
              <table id="tbl-ga" style="margin-top:6px">
                <thead><tr><th>#</th><th class="left">Team</th><th>GP</th><th>GA</th><th>GD</th><th>Pts</th></tr></thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </details>
      </div>
    </section>

    <section class="card" style="margin-top:10px">
      <h3 style="margin:0 0 8px">Per-league comparison</h3>
      <div id="league-mini" class="mini"></div>
      <div class="note">Each card: Avg goals • Home/Draw/Away % • Completion %.</div>
    </section>

    <footer class="foot">
      <span>All statistics are compiled and produced by eFPL.</span>
      <span id="foot-scope">Scope: All Leagues</span>
    </footer>
  </div>

<script>
/* same JS as your last working version (unchanged logic, only visuals were adjusted) */
</script>
</body>
</html>
